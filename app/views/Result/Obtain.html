{{set . "title" "Obtained"}}
{{template "header.html" .}}



<div id="offcanvas-slide" uk-offcanvas>
    <div class="uk-offcanvas-bar">

        <ul class="uk-nav uk-nav-default">
            <li class="uk-active"><a href="/">Home</a></li>
            <li><a href="/Profit">Profits</a></li>
        </ul>

    </div>
</div>

<!-- Base Info, so that you don't have to memorize

type Information struct {
	Recipes *models.Recipes
	Prices  *models.SimplePrices
	Profits *models.Profits
	*InnerInformation
}

type InnerInformation struct {
	InnerRecipes      map[int]*models.Recipes      // Contains the inner recipes for some key = Recipe.ID
	InnerSimplePrices map[int]*models.SimplePrices // Contains the inner prices for some key =  Item ID
	InnerProfits      map[int]*models.Profits      // Contains the profits for the inner recipes for some key = Recipe.Id
}

****Note that these are maps that we can access objects from below.

type Profits struct {
	RecipeID         int     `bson:"RecipeID"`
	ItemID           int     `bson:"ItemID"`
	OnMarketboard    bool    `bson:"OnMarketboard"`
	MaterialCosts    int     `bson:"MaterialCosts"`
	Profits          int     `bson:"Profits"`
	ProfitPercentage float32 `bson:"ProfitPercentage"`
	Added            int64   `bson:"Added"`
}

type Recipes struct {
	Name               string  `bson:"Name" json:"Name"`
	IconID             int     `bson:"IconID" json:"IconID"`
	ItemResultTargetID int     `bson:"ItemID" json:"ItemResultTargetID"`
	ID                 int     `bson:"RecipeID" json:"ID"`
	CraftTypeTargetID  int     `bson:"CraftTypeTargetID" json:"CraftTypeTargetID"`
	AmountResult       int     `bson:"AmountResult" json:"AmountResult"`
	IngredientID       [10]int `bson:"IngredientID"`
	IngredientAmounts  [10]int `bson:"IngredientAmount"`
	IngredientRecipes  [][]int `bson:"IngredientRecipes"`
	Added              int64   `bson:"Added"`
}


type SimplePrices struct {
	ItemID            int
	HistoryPrice      int
	LowestMarketPrice int
	OnMarketboard     bool
	Added             int64
}

-->

<!-- Main Recipe Analysis-->
<section>
    <div class="uk-section uk-background-secondary uk-animation-slide-left uk-light">
        <div class="uk-container">
            <div class="uk-width-4-5 uk-float-right">
                <h2>Analysis</h2>
                <h4><img class="itemicon" value="{{.baseinfo.Recipes.IconID}}" uk-img> {{.baseinfo.Recipes.Name}}</h4>
                <ul class="uk-list">
                    <li>On Market: {{.baseinfo.Prices.OnMarketboard}}</li>
                    <li>Marketboard Price: <span class="pricenumber">{{.baseinfo.Prices.LowestMarketPrice}}</span>
                    </li>
                    <li>
                        Material Costs: <span class="pricenumber">{{.baseinfo.Profits.MaterialCosts}}</span>
                    </li>
                    <li>
                        Profits: <span class="pricenumber">{{.baseinfo.Profits.Profits}}</span>
                    </li>
                    <li>Profit Percentage: {{.baseinfo.Profits.ProfitPercentage}}%</li>
                    <li class="datetime" value="{{.baseinfo.Profits.Added}}"> </li>
                </ul>
            </div>
        </div>
    </div>
</section>
<!-- Materials -->
<section>
    <div class="uk-section uk-background-secondary uk-animation-slide-left uk-light">
        <div class="uk-container">
            <div class="uk-width-4-5 uk-float-right">
                <h2>Materials</h2>
                <ul class="uk-list">
                    {{range $ingredientindex, $IngredientID := .baseinfo.Recipes.IngredientID}}
                    <h4><img class="itemicon" value="{{index $.baseinfo.Recipes.IngredientIconID $ingredientindex}}"
                            uk-img>
                        {{index $.baseinfo.Recipes.IngredientNames $ingredientindex}}</h4>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</section>

<!-- Materials that have Recipes -->
<section>
    <div class="uk-section uk-background-secondary uk-animation-slide-left uk-light">
        <div class="uk-container">
            <div class="uk-width-4-5 uk-float-right">
                <h2>All Inner Recipes</h2>
                <ul class="uk-list">
                    <!-- Obtains Ingredient Recipes for the base ingredient. -->
                    {{range $indexofbaseingredient,$ingredientrecipeidarray := .baseinfo.Recipes.IngredientRecipes}}
                    <!-- Ranges through the array of recipes for one ingredient -->
                    {{range $indexofrecipe, $ingredientrecipeid := $ingredientrecipeidarray}}
                    <li>
                        {{$innerrecipes := index $.innerinfo.Recipes $ingredientrecipeid}}
                        {{$innerprofits := index $.innerinfo.Profits $ingredientrecipeid}}
                        {{$innerprices := index $.innerinfo.Prices $innerrecipes.ItemResultTargetID}}
                        <!-- Inner Recipe Analysis -->
                        <h4><img class="itemicon" value="{{$innerrecipes.IconID}}" uk-img> {{$innerrecipes.Name}}
                        </h4>
                        <ul class="uk-list">
                            <li>On Market: {{$innerprices.OnMarketboard}}</li>
                            <li>Marketboard Price: <span class="pricenumber">{{$innerprices.LowestMarketPrice}}</span>
                            </li>
                            <li>
                                Material Costs: <span class="pricenumber">{{$innerprofits.MaterialCosts}}</span>
                            </li>
                            <li>
                                Profits: <span class="pricenumber">{{$innerprofits.Profits}}</span>
                            </li>
                            <li>Profit Percentage: {{$innerprofits.ProfitPercentage}}%</li>
                            <li class="datetime" value="{{$innerprofits.Added}}"> </li>
                        </ul>
                    </li>
                    {{end}}
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</section>


<script src="/public/js/obtain.js"></script>
<script>
    getitemicon();
    changetodecimals();
    changeunixtodate();
</script>

{{template "footer.html" .}}